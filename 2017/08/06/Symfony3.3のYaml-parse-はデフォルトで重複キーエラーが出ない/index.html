

<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <title>Symfony3.3のYaml::parse()はデフォルトで重複キーエラーが出ない | howyilog</title>

    <!-- Open Graph -->
    <meta name="description" content="&amp;#x554F;&amp;#x984C;12345678$text = &amp;lt;&amp;lt;&amp;lt;YAMLhoge: 300foo:  400bar:  500foo:  600YAML;var_dump(Symfony\Component\Yaml\Yaml::parse($text)); &amp;#x3053;&amp;#x308C;&amp;#x306F; foo &amp;#x306E;&amp;#x91CD;&amp;#x8907;&amp;#x30">
<meta property="og:type" content="article">
<meta property="og:title" content="Symfony3.3のYaml::parse()はデフォルトで重複キーエラーが出ない">
<meta property="og:url" content="https://howyi.github.io/2017/08/06/Symfony3.3のYaml-parse-はデフォルトで重複キーエラーが出ない/index.html">
<meta property="og:site_name" content="howyilog">
<meta property="og:description" content="&amp;#x554F;&amp;#x984C;12345678$text = &amp;lt;&amp;lt;&amp;lt;YAMLhoge: 300foo:  400bar:  500foo:  600YAML;var_dump(Symfony\Component\Yaml\Yaml::parse($text)); &amp;#x3053;&amp;#x308C;&amp;#x306F; foo &amp;#x306E;&amp;#x91CD;&amp;#x8907;&amp;#x30">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2017-08-06T05:22:08.328Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Symfony3.3のYaml::parse()はデフォルトで重複キーエラーが出ない">
<meta name="twitter:description" content="&amp;#x554F;&amp;#x984C;12345678$text = &amp;lt;&amp;lt;&amp;lt;YAMLhoge: 300foo:  400bar:  500foo:  600YAML;var_dump(Symfony\Component\Yaml\Yaml::parse($text)); &amp;#x3053;&amp;#x308C;&amp;#x306F; foo &amp;#x306E;&amp;#x91CD;&amp;#x8907;&amp;#x30">

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Person",
  "email": "mailto:",
  "image": "",
  "name": "howyi",
  "url": "https://howyi.github.io"
}
</script>
    <script>
    var algoliaEnabled = false;
    
</script>

    

    
    
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
    
    
    
        <!-- stylesheets list from config.yml -->
        
        <link rel="stylesheet" href="/css/aloha.css">
        
        <link rel="stylesheet" href="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.css">
        
        <link rel="stylesheet" href="//cdn.bootcss.com/magnific-popup.js/1.1.0/magnific-popup.min.css">
        
    

</head>
<body id="body" style="margin-bottom: 0;" class="pushable">

    <div class="ui top fixed menu">
        <a class="item" id="menu-icon"><i class="sidebar icon"></i></a>
    </div>

    <div id="menu-sidebar" class="ui left vertical sidebar menu">

    <div id="sidebar-top">
        <div class="content">
            <h3>howyilog</h3>
        </div>
    </div>
    <div class="ui container sidebar-card">
    <div class="ui people shape content">
        <div class="active side">
            <div class="ui card">
                <div class="image">
                    <img class="ui medium bordered image" src="/images/chicken.png">
                </div>
                <div class="content">
                    <a class="header">howyi</a>
                    
                        <div class="meta">
                            ほゐ
                        </div>
                    
                </div>
                <!-- <div class="extra content">
                    <div class="ui list">
                        
                        
                    </div>

                </div> -->
                <div class="extra content">
                    <div class="ui list">
                        

                                <a href="https://github.com/howyi"><i class="large github icon" style="float: left"></i></a>

                            
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>


    
    

    

    
    <a href="/index.html" class="item" >
        <i class="home icon"></i>
        HOME
    </a>

    

    
</div>

    <div class="pusher body-content">
        <div id="content" class="ui main container">
            <!--<div class="ui one column grid">-->
                <!--<div class="column">-->
                    <!--<div class="ui main container">-->
                        <div id="post-Symfony3.3のYaml-parse-はデフォルトで重複キーエラーが出ない" class="ui main container article-type-post">

    
    <div class="ui divided grid">

        <div class="two column row" id="article-content">

            <div class="thirteen wide computer thirteen wide tablet sixteen wide mobile column">
                

<h1 class="ui header">
    
    Symfony3.3のYaml::parse()はデフォルトで重複キーエラーが出ない
</h1>



                <div class="article-inner">

                    <div class="article-entry" itemprop="articleBody">
                        
                        <h3 id="&#x554F;&#x984C;"><a href="#&#x554F;&#x984C;" class="headerlink" title="&#x554F;&#x984C;"></a>&#x554F;&#x984C;</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$text = <span class="string">&lt;&lt;&lt;YAML</span></div><div class="line"><span class="string">hoge: 300</span></div><div class="line"><span class="string">foo:  400</span></div><div class="line"><span class="string">bar:  500</span></div><div class="line"><span class="string">foo:  600</span></div><div class="line"><span class="string">YAML;</span></div><div class="line"></div><div class="line">var_dump(Symfony\Component\Yaml\Yaml::parse($text));</div></pre></td></tr></table></figure>
<p>&#x3053;&#x308C;&#x306F; <code>foo</code> &#x306E;&#x91CD;&#x8907;&#x30AD;&#x30FC;&#x30A8;&#x30E9;&#x30FC;&#x304C;&#x51FA;&#x308B;&#x304B;&#x306A;&#x3001;&#x3068;&#x601D;&#x3044;&#x304D;&#x3084;&#x51FA;&#x306A;&#x3044;&#x3002;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">% php test.php</div><div class="line">test.php:12:</div><div class="line">array(3) {</div><div class="line">  <span class="string">&apos;hoge&apos;</span> =&gt;</div><div class="line">  int(300)</div><div class="line">  <span class="string">&apos;foo&apos;</span> =&gt;</div><div class="line">  int(400)</div><div class="line">  <span class="string">&apos;bar&apos;</span> =&gt;</div><div class="line">  int(500)</div><div class="line">}</div></pre></td></tr></table></figure></p>
<p>&#x3069;&#x3046;&#x3084;&#x3089;&#x91CD;&#x8907;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F; <strong>&#x6700;&#x521D;&#x306B;&#x5165;&#x529B;&#x3055;&#x308C;&#x305F;&#x5024;</strong> &#x304C;&#x4F7F;&#x308F;&#x308C;&#x3066;&#x3044;&#x308B;&#x3002;</p>
<h3 id="&#x539F;&#x56E0;"><a href="#&#x539F;&#x56E0;" class="headerlink" title="&#x539F;&#x56E0;"></a>&#x539F;&#x56E0;</h3><p>&#x30D1;&#x30FC;&#x30B9;&#x51E6;&#x7406;&#x3092;&#x8FFD;&#x3063;&#x305F;&#x6240;&#x3001;&#x30A8;&#x30E9;&#x30FC;&#x5236;&#x5FA1;&#x6F14;&#x7B97;&#x5B50;&#x306B;&#x3088;&#x3063;&#x3066;&#x30A8;&#x30E9;&#x30FC;&#x304C;&#x8868;&#x793A;&#x3055;&#x308C;&#x3066;&#x3044;&#x306A;&#x3044;&#x3088;&#x3046;&#x3060;&#x3063;&#x305F;<br><a href="https://github.com/symfony/yaml/blob/3.3/Parser.php#L340" target="_blank" rel="external">https://github.com/symfony/yaml/blob/3.3/Parser.php#L340</a></p>
<ul class="ui list">
<li>&#x91CD;&#x8907;&#x30AD;&#x30FC;&#x3092;&#x52DD;&#x624B;&#x306B;&#x30DE;&#x30C3;&#x30D4;&#x30F3;&#x30B0;&#x3059;&#x308B;&#x306E;&#x306F;3.2&#x304B;&#x3089;&#x306F;&#x975E;&#x63A8;&#x5968;&#x3067;&#x3059;&#x3088;</li>
<li>4.0&#x304B;&#x3089;&#x306F; <code>\Symfony\Component\Yaml\Exception\ParseException</code> &#x304C;&#x51FA;&#x307E;&#x3059;&#x3088;</li>
</ul>
<p>&#x3068;&#x3044;&#x3046;&#x611F;&#x3058;</p>
<h3 id="&#x5BFE;&#x7B56;"><a href="#&#x5BFE;&#x7B56;" class="headerlink" title="&#x5BFE;&#x7B56;"></a>&#x5BFE;&#x7B56;</h3><p>&#x3068;&#x308A;&#x3042;&#x3048;&#x305A;&#x30A8;&#x30E9;&#x30FC;&#x3092;&#x51FA;&#x3057;&#x305F;&#x304B;&#x3063;&#x305F;&#x306E;&#x3067; <code>E_USER_DEPRECATED</code> &#x306B; <code>set_error_handler()</code> &#x3092;&#x884C;&#x3046;&#x3053;&#x3068;&#x3067;&#x5BFE;&#x51E6;&#x3057;&#x305F;<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$text = <span class="string">&lt;&lt;&lt;YAML</span></div><div class="line"><span class="string">hoge: 300</span></div><div class="line"><span class="string">foo:  400</span></div><div class="line"><span class="string">bar:  500</span></div><div class="line"><span class="string">foo:  600</span></div><div class="line"><span class="string">YAML;</span></div><div class="line"></div><div class="line">set_error_handler(</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="params">($errno, $errstr, $errfile, $errline)</span> </span>{</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> \ErrorException(</div><div class="line">            $errstr,</div><div class="line">            <span class="number">0</span>,</div><div class="line">            $errno,</div><div class="line">            $errfile,</div><div class="line">            $errline</div><div class="line">        );</div><div class="line">    },</div><div class="line">    E_USER_DEPRECATED</div><div class="line">);</div><div class="line">var_dump(Symfony\Component\Yaml\Yaml::parse($text));</div><div class="line">restore_error_handler();</div></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">% php test.php</div><div class="line">PHP Fatal error:  Uncaught ErrorException: Duplicate key <span class="string">&quot;foo&quot;</span> detected whilst parsing YAML. Silent handling of duplicate mapping keys <span class="keyword">in</span> YAML is deprecated since version 3.2 and will throw \Symfony\Component\Yaml\Exception\ParseException <span class="keyword">in</span> 4.0. <span class="keyword">in</span> vendor\symfony\yaml\Parser.php:340</div></pre></td></tr></table></figure>

                        
                    </div>

                    
                    
                    

                    <div class="description post-description">
    <span class="post-description-item">
        <time datetime="2017-08-06T02:46:26.000Z" itemprop="datePublished">2017-08-06</time>

    </span>
    <span class="post-description-item">
        
    </span>
</div>

                    <br />
                    <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

                </div>
                
                <div id="pagination" class="nav-web ui text container pagination">

    <div class="ui stackable two column divided grid container">
        <div class="row">
            <div class="column nav-left">
                

                <a class="ui tiny button disabled"><i class="angle left icon"></i>Previous</a>

                
            </div>
            <div class="column nav-right">
                

                <a class="ui tiny button disabled">Next<i class="angle right icon"></i></a>

                
            </div>
        </div>
    </div>

</div>
                

            </div>


            
            <div class="three wide computer three wide tablet column">

                <div class="ui sticky article-toc" id="article-toc">
                    <!-- toc -->
                    <ol class="ui ordered list"><li><a href="#問題"><span>問題</span></a></li><li><a href="#原因"><span>原因</span></a></li><li><a href="#対策"><span>対策</span></a></li></ol>
                </div>

            </div>
            

        </div>
    </div>
</div>


<!-- disqus start -->
<div id="disqus_thread"></div>
<script type="text/javascript">

<!-- following code is copied form hexo theme Next, thanks a lot -->

var disqus_shortname = 'https-howyi-github-io';
var disqus_identifier = '2017/08/06/Symfony3.3のYaml-parse-はデフォルトで重複キーエラーが出ない/';
var disqus_title = 'Symfony3.3のYaml::parse()はデフォルトで重複キーエラーが出ない';

function run_disqus_script(disqus_script) {
	var dsq = document.createElement('script');
	dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}

run_disqus_script('count.js');


var disqus_config = function () {
    this.page.url = disqus_url;
    this.page.identifier = disqus_identifier;
    this.page.title = disqus_title;
};

run_disqus_script('embed.js');




</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                                
<!-- disqus end -->


                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        </div>
        <div class="ui vertical footer segment">
    <div class="ui center aligned container">
        <div class="ui inverted section divider"></div>
        &copy; 2017 <a href="/">howyi</a>,
        Powered by <a href="https://github.com/henryhuang/hexo-theme-aloha" target="_blank">Aloha</a> and <a
                href="http://hexo.io/" target="_blank">Hexo</a>.
    </div>
</div>

    </div>




<!-- scripts list from theme config.yml -->

<script src="//cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>

<script src="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.js"></script>

<script src="//cdn.bootcss.com/algoliasearch/3.18.1/algoliasearch.min.js"></script>

<script src="//cdn.bootcss.com/algoliasearch-helper-js/2.13.0/algoliasearch.helper.min.js"></script>

<script src="/js/semantic-ui-algolia.js"></script>

<script src="/js/aloha-events.js"></script>



</body>
</html>
